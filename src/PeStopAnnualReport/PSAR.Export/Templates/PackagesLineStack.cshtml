@using PSAR.Export
@using System.Globalization
@inherits RazorBlade.PlainTextTemplate<DisplayData>;
@{
    var months =CultureInfo.CurrentCulture.DateTimeFormat.MonthNames;
    //var legent = Model.packages.First().Values.Select(it => it.Key).ToArray();
}

//this is the script to display for @Model.year packages @Model.colData.Count
function DisplayPackagesStackLine(idDiv) 
{
    var myChart = echarts.init(document.getElementById(idDiv));

var option = {
  title: {
    text: 'Packages @Model.year'
  },
  tooltip: {
    trigger: 'axis'
  },
  legend: {
    data: [@string.Join(",", Model.colNames.Select(it=>$"'{it}'"))]
  },
  grid: {
    left: '3%',
    right: '4%',
    bottom: '3%',
    containLabel: true
  },
  toolbox: {
    feature: {
      saveAsImage: {}
    }
  },
  xAxis: {
    type: 'category',
    boundaryGap: false,
    data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul','Aug','Sep','Oct','Nov','Dec']
  },
  yAxis: {
    type: 'value'
  },
  series: [

@foreach(var column in Model.colData)
{
    <text>
        {
        name: '@column.Key',
        type: 'bar',
        stack: 'Total',
        data: [@string.Join(",",column.Value.Select(it=>it.Value).ToArray())]
        },

    </text>    
}

  ]
};

      myChart.setOption(option);

      }